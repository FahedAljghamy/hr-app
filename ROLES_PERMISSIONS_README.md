# ูุธุงู ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช ุงูุฏููุงูููู - HR System
**Author: Eng.Fahed**

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ูุธุงู ุดุงูู ููุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช ุงูุฏููุงูููู ููุธุงู ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ ุจุงุณุชุฎุฏุงู Laravel 10 ู spatie/laravel-permission. ูููุฑ ุงููุธุงู ุชุญูููุง ูุงููุงู ุจุตูุงุญูุงุช ุงููุณุชุฎุฏููู ูุน ูุงุฌูุงุช ูุณุชุฎุฏู ุญุฏูุซุฉ ูุณููุฉ ุงูุงุณุชุฎุฏุงู.

## ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ

### ๐ ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ (Roles Management)
- **CRUD ูุงูู ููุฃุฏูุงุฑ**: ุฅูุดุงุกุ ุนุฑุถุ ุชุนุฏููุ ูุญุฐู ุงูุฃุฏูุงุฑ
- **ุฅุณูุงุฏ ุงูุตูุงุญูุงุช ููุฃุฏูุงุฑ**: ูุงุฌูุฉ ุฏููุงููููุฉ ูุฑุจุท ุงูุตูุงุญูุงุช ุจุงูุฃุฏูุงุฑ
- **ุนุฑุถ ุชูุตููู ููุฃุฏูุงุฑ**: ูุน ุฅุญุตุงุฆูุงุช ูุชูุงุตูู ุงูุตูุงุญูุงุช
- **ุฃุฏูุงุฑ ุงูุชุฑุงุถูุฉ**: Admin, Manager, Employee

### ๐ก๏ธ ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช (Permissions Management)
- **CRUD ูุงูู ููุตูุงุญูุงุช**: ุฅุฏุงุฑุฉ ุดุงููุฉ ููุตูุงุญูุงุช
- **ุฅูุดุงุก ูุชุนุฏุฏ ููุตูุงุญูุงุช**: ุฅูุดุงุก ูุฌููุนุฉ ุตูุงุญูุงุช ุฏูุนุฉ ูุงุญุฏุฉ
- **ุชุฌููุน ุงูุตูุงุญูุงุช**: ุนุฑุถ ุงูุตูุงุญูุงุช ูุฌูุนุฉ ุญุณุจ ุงูููุน
- **ุตูุงุญูุงุช ุดุงููุฉ**: ุชุบุทู ุฌููุน ุฌูุงูุจ ูุธุงู ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ

### ๐ฅ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู (User Management)
- **ุฅุฏุงุฑุฉ ุดุงููุฉ ูููุณุชุฎุฏููู**: ุฅูุดุงุก ูุชุนุฏูู ุงููุณุชุฎุฏููู
- **ุฅุณูุงุฏ ุงูุฃุฏูุงุฑ**: ุฑุจุท ุงููุณุชุฎุฏููู ุจุงูุฃุฏูุงุฑ ุงูููุงุณุจุฉ
- **ุตูุงุญูุงุช ูุจุงุดุฑุฉ**: ุฅููุงููุฉ ุฅุนุทุงุก ุตูุงุญูุงุช ูุจุงุดุฑุฉ ูููุณุชุฎุฏููู
- **ููุงุชุฑ ูุชูุฏูุฉ**: ุงูุจุญุซ ูุงูููุชุฑุฉ ุญุณุจ ุงูุฏูุฑ ูููุน ุงููุณุชุฎุฏู

## ุงููููู ุงูุชููู

### ๐ ุงูุฌุฏุงูู ุงููููุดุฃุฉ
```sql
- roles                    # ุฌุฏูู ุงูุฃุฏูุงุฑ
- permissions             # ุฌุฏูู ุงูุตูุงุญูุงุช  
- model_has_roles         # ุฑุจุท ุงููุณุชุฎุฏููู ุจุงูุฃุฏูุงุฑ
- model_has_permissions   # ุฑุจุท ุงููุณุชุฎุฏููู ุจุงูุตูุงุญูุงุช ุงููุจุงุดุฑุฉ
- role_has_permissions    # ุฑุจุท ุงูุฃุฏูุงุฑ ุจุงูุตูุงุญูุงุช
```

### ๐ฎ ุงูููุชุฑููุฑุฒ ุงูููุทูุฑุฉ
1. **RoleController**: ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ ูุน API endpoints
2. **PermissionController**: ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช ูุน ุงูุฅูุดุงุก ุงููุชุนุฏุฏ
3. **UserManagementController**: ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูุงูุฃุฏูุงุฑ

### ๐ก๏ธ ุงูุญูุงูุฉ ูุงูุฃูุงู
- **Middleware ูุชูุฏู**: ููุชุญูู ุจุงููุตูู ุญุณุจ ุงูุตูุงุญูุงุช
- **Validation ุดุงูู**: ููุชุฃูุฏ ูู ุตุญุฉ ุงูุจูุงูุงุช
- **CSRF Protection**: ุญูุงูุฉ ูู ูุฌูุงุช CSRF
- **Authorization**: ุชุญูู ุฏููู ุจุงููุตูู ูููุธุงุฆู

## ุงูุตูุงุญูุงุช ุงููุชุงุญุฉ

### ๐ค ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
- `users.view` - ุนุฑุถ ุงููุณุชุฎุฏููู
- `users.create` - ุฅูุดุงุก ูุณุชุฎุฏููู ุฌุฏุฏ
- `users.edit` - ุชุนุฏูู ุงููุณุชุฎุฏููู
- `users.delete` - ุญุฐู ุงููุณุชุฎุฏููู

### ๐ ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ
- `roles.view` - ุนุฑุถ ุงูุฃุฏูุงุฑ
- `roles.create` - ุฅูุดุงุก ุฃุฏูุงุฑ ุฌุฏูุฏุฉ
- `roles.edit` - ุชุนุฏูู ุงูุฃุฏูุงุฑ
- `roles.delete` - ุญุฐู ุงูุฃุฏูุงุฑ
- `roles.assign` - ุฅุณูุงุฏ ุงูุฃุฏูุงุฑ

### ๐ก๏ธ ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช
- `permissions.view` - ุนุฑุถ ุงูุตูุงุญูุงุช
- `permissions.create` - ุฅูุดุงุก ุตูุงุญูุงุช ุฌุฏูุฏุฉ
- `permissions.edit` - ุชุนุฏูู ุงูุตูุงุญูุงุช
- `permissions.delete` - ุญุฐู ุงูุตูุงุญูุงุช
- `permissions.assign` - ุฅุณูุงุฏ ุงูุตูุงุญูุงุช

### ๐ผ ุฅุฏุงุฑุฉ ุงูููุธููู
- `employees.view` - ุนุฑุถ ุงูููุธููู
- `employees.create` - ุฅุถุงูุฉ ููุธููู ุฌุฏุฏ
- `employees.edit` - ุชุนุฏูู ุจูุงูุงุช ุงูููุธููู
- `employees.delete` - ุญุฐู ุงูููุธููู

### ๐ ุงูุญุถูุฑ ูุงูุงูุตุฑุงู
- `attendance.view` - ุนุฑุถ ุณุฌูุงุช ุงูุญุถูุฑ
- `attendance.create` - ุชุณุฌูู ุงูุญุถูุฑ
- `attendance.edit` - ุชุนุฏูู ุณุฌูุงุช ุงูุญุถูุฑ
- `attendance.delete` - ุญุฐู ุณุฌูุงุช ุงูุญุถูุฑ

### ๐๏ธ ุฅุฏุงุฑุฉ ุงูุฅุฌุงุฒุงุช
- `leaves.view` - ุนุฑุถ ุงูุฅุฌุงุฒุงุช
- `leaves.create` - ุทูุจ ุฅุฌุงุฒุงุช ุฌุฏูุฏุฉ
- `leaves.edit` - ุชุนุฏูู ุทูุจุงุช ุงูุฅุฌุงุฒุงุช
- `leaves.delete` - ุญุฐู ุทูุจุงุช ุงูุฅุฌุงุฒุงุช
- `leaves.approve` - ุงูููุงููุฉ ุนูู ุงูุฅุฌุงุฒุงุช

### ๐ฐ ุฅุฏุงุฑุฉ ุงูุฑูุงุชุจ
- `payroll.view` - ุนุฑุถ ุงูุฑูุงุชุจ
- `payroll.create` - ุฅูุดุงุก ุณุฌูุงุช ุฑูุงุชุจ
- `payroll.edit` - ุชุนุฏูู ุงูุฑูุงุชุจ
- `payroll.delete` - ุญุฐู ุณุฌูุงุช ุงูุฑูุงุชุจ

### ๐ ุงูุชูุงุฑูุฑ
- `reports.view` - ุนุฑุถ ุงูุชูุงุฑูุฑ
- `reports.export` - ุชุตุฏูุฑ ุงูุชูุงุฑูุฑ

### ๐ ููุญุฉ ุงูุชุญูู
- `dashboard.view` - ุงููุตูู ูููุญุฉ ุงูุชุญูู
- `dashboard.admin` - ููุญุฉ ุชุญูู ุงููุฏูุฑ

## Routes ุงูููุถุงูุฉ

### Web Routes
```php
// ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช
Route::resource('roles', RoleController::class);
Route::resource('permissions', PermissionController::class);
Route::resource('user-management', UserManagementController::class);

// API Routes
Route::prefix('api')->group(function () {
    Route::get('roles', [RoleController::class, 'apiIndex']);
    Route::post('roles/{role}/assign-permissions', [RoleController::class, 'assignPermissions']);
    Route::get('permissions', [PermissionController::class, 'apiIndex']);
    
    // ุฅุฏุงุฑุฉ ุฃุฏูุงุฑ ูุตูุงุญูุงุช ุงููุณุชุฎุฏููู
    Route::post('users/{user}/assign-role', [UserManagementController::class, 'assignRole']);
    Route::post('users/{user}/revoke-role', [UserManagementController::class, 'revokeRole']);
    Route::post('users/{user}/assign-permission', [UserManagementController::class, 'assignPermission']);
    Route::post('users/{user}/revoke-permission', [UserManagementController::class, 'revokePermission']);
});

// ุงูุฅูุดุงุก ุงููุชุนุฏุฏ ููุตูุงุญูุงุช
Route::post('permissions/bulk-create', [PermissionController::class, 'bulkCreate']);
```

## ุงููุงุฌูุงุช ุงูููุทูุฑุฉ

### ๐จ ุชุตููู ุญุฏูุซ ููุชุฌุงูุจ
- **Tailwind CSS**: ุชุตููู ุญุฏูุซ ูุฃููู
- **Dark Mode Support**: ุฏุนู ุงููุถุน ุงููุธูู
- **Mobile Responsive**: ูุชุฌุงูุจ ูุน ุฌููุน ุงูุฃุฌูุฒุฉ
- **Arabic RTL**: ุฏุนู ูุงูู ููุบุฉ ุงูุนุฑุจูุฉ

### ๐ฑ Blade Views ุงููููุดุฃุฉ

#### ุงูุฃุฏูุงุฑ (Roles)
- `roles/index.blade.php` - ูุงุฆูุฉ ุงูุฃุฏูุงุฑ ูุน ุงูุจุญุซ ูุงูููุชุฑุฉ
- `roles/create.blade.php` - ุฅูุดุงุก ุฏูุฑ ุฌุฏูุฏ ูุน ุงุฎุชูุงุฑ ุงูุตูุงุญูุงุช
- `roles/show.blade.php` - ุนุฑุถ ุชูุงุตูู ุงูุฏูุฑ ูุงูุฅุญุตุงุฆูุงุช
- `roles/edit.blade.php` - ุชุนุฏูู ุงูุฏูุฑ ูุน ููุฎุต ุงูุชุบููุฑุงุช

#### ุงูุตูุงุญูุงุช (Permissions)
- `permissions/index.blade.php` - ูุงุฆูุฉ ุงูุตูุงุญูุงุช ูุน ุงูุชุฌููุน ูุงูุฅุญุตุงุฆูุงุช
- `permissions/create.blade.php` - ุฅูุดุงุก ุตูุงุญูุฉ ุฌุฏูุฏุฉ ูุน ูููุฏ ุงูุฃุณูุงุก

#### ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู (User Management)
- `user-management/index.blade.php` - ูุงุฆูุฉ ุงููุณุชุฎุฏููู ูุน ุงูููุงุชุฑ ุงููุชูุฏูุฉ

### โก JavaScript ุงูููุทูุฑ
- **ุชูุงุนููุฉ ูุชูุฏูุฉ**: ุชุญุฏูุฏ ุงูุตูุงุญูุงุช ุจุงููุฌููุนุงุช
- **ุงูุชุญูู ูู ุงูููุงุฐุฌ**: validation ูู ุงูููุช ุงููุนูู
- **ุชุฃููุฏ ุงูุนูููุงุช**: ุฑุณุงุฆู ุชุฃููุฏ ููุนูููุงุช ุงูุญุณุงุณุฉ
- **ุชุญุณูู UX**: ุชุฃุซูุฑุงุช ุจุตุฑูุฉ ูุชูุจููุงุช ุชููุงุฆูุฉ

## ุงูุงุฎุชุจุงุฑุงุช

### ๐งช Feature Tests
ุชู ุฅูุดุงุก ูุฌููุนุฉ ุดุงููุฉ ูู ุงูุงุฎุชุจุงุฑุงุช ูู `RolePermissionTest`:

```php
- test_default_roles_and_permissions_are_created()
- test_user_can_be_assigned_roles()
- test_user_has_permissions_through_roles()
- test_user_can_have_direct_permissions()
- test_super_admin_has_all_permissions()
- test_can_create_role_with_permissions()
- test_can_remove_roles_and_permissions()
- test_permission_middleware_works()
- test_can_update_role_permissions()
- test_cannot_delete_role_with_users()
```

### โถ๏ธ ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช
```bash
php artisan test --filter=RolePermissionTest
```

## API Documentation

### ๐ Postman Collection
ุชู ุฅูุดุงุก ูุฌููุนุฉ ุดุงููุฉ ูู endpoints ูู `postman_collection.json`:

#### Authentication
- `POST /login` - ุชุณุฌูู ุงูุฏุฎูู

#### Roles Management
- `GET /roles` - ุฌูุจ ุฌููุน ุงูุฃุฏูุงุฑ
- `POST /roles` - ุฅูุดุงุก ุฏูุฑ ุฌุฏูุฏ
- `GET /roles/{id}` - ุนุฑุถ ุฏูุฑ ูุญุฏุฏ
- `PUT /roles/{id}` - ุชุญุฏูุซ ุฏูุฑ
- `DELETE /roles/{id}` - ุญุฐู ุฏูุฑ
- `POST /api/roles/{role}/assign-permissions` - ุฅุณูุงุฏ ุตูุงุญูุงุช ูุฏูุฑ

#### Permissions Management
- `GET /permissions` - ุฌูุจ ุฌููุน ุงูุตูุงุญูุงุช
- `POST /permissions` - ุฅูุดุงุก ุตูุงุญูุฉ ุฌุฏูุฏุฉ
- `POST /permissions/bulk-create` - ุฅูุดุงุก ูุชุนุฏุฏ ููุตูุงุญูุงุช

#### User Management
- `GET /user-management` - ุฌูุจ ุงููุณุชุฎุฏููู ูุน ููุงุชุฑ
- `POST /user-management` - ุฅูุดุงุก ูุณุชุฎุฏู ุฌุฏูุฏ
- `POST /api/users/{user}/assign-role` - ุฅุณูุงุฏ ุฏูุฑ ููุณุชุฎุฏู
- `POST /api/users/{user}/assign-permission` - ุฅุณูุงุฏ ุตูุงุญูุฉ ููุณุชุฎุฏู

## ุงูุชุซุจูุช ูุงูุฅุนุฏุงุฏ

### 1. ุชุซุจูุช ุงูุญุฒูุฉ
```bash
composer require spatie/laravel-permission
```

### 2. ูุดุฑ ุงููููุงุช
```bash
php artisan vendor:publish --provider="Spatie\Permission\PermissionServiceProvider"
```

### 3. ุชุดุบูู Migrations
```bash
php artisan migrate
```

### 4. ุชุดุบูู Seeders
```bash
php artisan db:seed --class=RolePermissionSeeder
```

### 5. ุฅุนุฏุงุฏ User Model
```php
use Spatie\Permission\Traits\HasRoles;

class User extends Authenticatable
{
    use HasRoles;
    // ...
}
```

## ุงุณุชุฎุฏุงู ุงููุธุงู

### ๐ง ุฅุณูุงุฏ ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช

```php
// ุฅุณูุงุฏ ุฏูุฑ ูููุณุชุฎุฏู
$user->assignRole('Manager');

// ุฅุณูุงุฏ ุตูุงุญูุฉ ูุจุงุดุฑุฉ
$user->givePermissionTo('reports.export');

// ุงูุชุญูู ูู ุงูุตูุงุญูุงุช
if ($user->can('users.create')) {
    // ุงููุณุชุฎุฏู ููููู ุฅูุดุงุก ูุณุชุฎุฏููู ุฌุฏุฏ
}

// ุฅูุดุงุก ุฏูุฑ ูุน ุตูุงุญูุงุช
$role = Role::create(['name' => 'HR Specialist']);
$role->givePermissionTo(['employees.view', 'leaves.approve']);
```

### ๐ก๏ธ ุญูุงูุฉ Routes
```php
// ุญูุงูุฉ ุจุงูุตูุงุญูุงุช
Route::middleware(['auth', 'permission:users.create'])->group(function () {
    Route::get('/users/create', [UserController::class, 'create']);
});

// ุญูุงูุฉ ุจุงูุฃุฏูุงุฑ
Route::middleware(['auth', 'role:Admin'])->group(function () {
    Route::get('/admin/dashboard', [AdminController::class, 'index']);
});
```

### ๐ฏ ูู Blade Templates
```blade
@can('users.create')
    <a href="{{ route('users.create') }}">ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ</a>
@endcan

@role('Admin')
    <div class="admin-panel">
        <!-- ูุญุชูู ุฎุงุต ุจุงููุฏูุฑ -->
    </div>
@endrole
```

## ุงูุฃุฏูุงุฑ ุงูุงูุชุฑุงุถูุฉ

### ๐ Admin (ูุฏูุฑ ุนุงู)
- **ุฌููุน ุงูุตูุงุญูุงุช**: ูุตูู ูุงูู ูุฌููุน ูุธุงุฆู ุงููุธุงู
- **ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู**: ุฅูุดุงุก ูุชุนุฏูู ูุญุฐู ุงููุณุชุฎุฏููู
- **ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช**: ุชุญูู ูุงูู ุจูุธุงู ุงูุตูุงุญูุงุช

### ๐ Manager (ูุฏูุฑ)
- **ุฅุฏุงุฑุฉ ุงูููุธููู**: ุนุฑุถ ูุฅูุดุงุก ูุชุนุฏูู ุงูููุธููู
- **ุงูุญุถูุฑ ูุงูุงูุตุฑุงู**: ุนุฑุถ ูุชุนุฏูู ุณุฌูุงุช ุงูุญุถูุฑ
- **ุงูุฅุฌุงุฒุงุช**: ุนุฑุถ ูุงูููุงููุฉ ุนูู ุทูุจุงุช ุงูุฅุฌุงุฒุงุช
- **ุงูุฑูุงุชุจ ูุงูุชูุงุฑูุฑ**: ุนุฑุถ ูุชุตุฏูุฑ ุงูุชูุงุฑูุฑ

### ๐จโ๐ผ Employee (ููุธู)
- **ููุญุฉ ุงูุชุญูู**: ุงููุตูู ูููุญุฉ ุงูุชุญูู ุงูุฃุณุงุณูุฉ
- **ุงูุญุถูุฑ**: ุนุฑุถ ูุชุณุฌูู ุงูุญุถูุฑ ุงูุดุฎุตู
- **ุงูุฅุฌุงุฒุงุช**: ุนุฑุถ ูุทูุจ ุงูุฅุฌุงุฒุงุช ุงูุดุฎุตูุฉ

## ููุงุญุธุงุช ูููุฉ

### โ๏ธ ุงุนุชุจุงุฑุงุช ุงูุฃูุงู
- ุฌููุน ุงูุนูููุงุช ูุญููุฉ ุจู CSRF tokens
- ุงูุชุญูู ูู ุงูุตูุงุญูุงุช ุนูู ูุณุชูู ุงูููุชุฑููุฑ ูุงูู middleware
- ููุน ุญุฐู ุงูุฃุฏูุงุฑ ุงููุฑุชุจุทุฉ ุจูุณุชุฎุฏููู
- ููุน ุงููุณุชุฎุฏู ูู ุญุฐู ุญุณุงุจู ุงูุดุฎุตู

### ๐ ุฅุฏุงุฑุฉ ุงููุงุด
- ุงููุธุงู ูุณุชุฎุฏู caching ููุตูุงุญูุงุช ูุชุญุณูู ุงูุฃุฏุงุก
- ูุชู ุชุญุฏูุซ ุงููุงุด ุชููุงุฆูุงู ุนูุฏ ุชุบููุฑ ุงูุตูุงุญูุงุช
- ุฅุนุฏุงุฏุงุช ุงููุงุด ูุงุจูุฉ ููุชุฎุตูุต ูู `config/permission.php`

### ๐ฑ ุงูุชูุงูู
- Laravel 10+
- PHP 8.1+
- MySQL 8.0+
- Bootstrap 5 / Tailwind CSS

## ุงููุทูุฑ
**Eng.Fahed** - ูุทูุฑ ูุธู ูุนูููุงุช ูุชุฎุตุต ูู Laravel ูุฃูุธูุฉ ุฅุฏุงุฑุฉ ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ

## ุงูุฏุนู ูุงูุตูุงูุฉ
ููุฏุนู ุงูุชููู ุฃู ุทูุจ ุชุทููุฑ ููุฒุงุช ุฅุถุงููุฉุ ูุฑุฌู ุงูุชูุงุตู ูุน ุงููุทูุฑ.

---

ุชู ุชุทููุฑ ูุฐุง ุงููุธุงู ุจุฃุนูู ูุนุงููุฑ ุงูุฌูุฏุฉ ูุงูุฃูุงู ูุถูุงู ุฅุฏุงุฑุฉ ูุนุงูุฉ ูุขููุฉ ูุตูุงุญูุงุช ุงููุณุชุฎุฏููู ูู ูุธุงู ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ.
